Description: Fixes command line for ajaxterm
Forwarded: not-needed
Author: Soren Hansen <soren@ubuntu.com>
Last-Update: 2011-11-18
Index: nova-2012.1~e4~20120207.12506/nova/virt/libvirt/utils.py
===================================================================
--- nova-2012.1~e4~20120207.12506.orig/nova/virt/libvirt/utils.py
+++ nova-2012.1~e4~20120207.12506/nova/virt/libvirt/utils.py
@@ -244,8 +244,7 @@
     :param token: Token to require for authentication
     :param port: Port to run on
     """
-    cmd = ['%s/tools/ajaxterm/ajaxterm.py' % utils.novadir(),
-           '--command', cmd, '-t', token, '-p', port]
+    cmd = ['ajaxterm', '--command', cmd, '-t', token, '-p', port, '-T', '300']
     execute(*cmd)
 
 
Index: nova-2012.1~e4~20120207.12506/nova/tests/test_libvirt.py
===================================================================
--- nova-2012.1~e4~20120207.12506.orig/nova/tests/test_libvirt.py
+++ nova-2012.1~e4~20120207.12506/nova/tests/test_libvirt.py
@@ -1933,7 +1933,8 @@
         utils.execute(mox.IgnoreArg(),
                       '--command', shell_cmd,
                       '-t', token,
-                      '-p', port)
+                      '-p', port,
+                      '-T', 300)
 
         # Start test
         self.mox.ReplayAll()
