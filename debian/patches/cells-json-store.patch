--- a/nova/cells/state.py
+++ b/nova/cells/state.py
@@ -152,10 +152,7 @@
             cells_config = CONF.cells.cells_config
 
         if cells_config:
-            config_path = CONF.find_file(cells_config)
-            if not config_path:
-                raise cfg.ConfigFilesNotFoundError(config_files=[cells_config])
-            return CellStateManagerFile(cell_state_cls, config_path)
+            return CellStateManagerFile(cell_state_cls)
 
         return CellStateManagerDB(cell_state_cls)
 
@@ -450,8 +447,11 @@
 
 
 class CellStateManagerFile(CellStateManager):
-    def __init__(self, cell_state_cls, cells_config_path):
-        self.cells_config_path = cells_config_path
+    def __init__(self, cell_state_cls=None):
+        cells_config = CONF.cells.cells_config
+        self.cells_config_path = CONF.find_file(cells_config)
+        if not self.cells_config_path:
+            raise cfg.ConfigFilesNotFoundError(config_files=[cells_config])
         super(CellStateManagerFile, self).__init__(cell_state_cls)
 
     def _cell_data_sync(self, force=False):
--- a/nova/tests/cells/test_cells_state_manager.py
+++ b/nova/tests/cells/test_cells_state_manager.py
@@ -17,14 +17,16 @@
 """
 
 from oslo.config import cfg
+import mock
+import six
 
 from nova.cells import state
 from nova import db
 from nova.db.sqlalchemy import models
 from nova import exception
+from nova.openstack.common import fileutils
 from nova import test
 
-
 FAKE_COMPUTES = [
     ('host1', 1024, 100, 0, 0),
     ('host2', 1024, 100, -1, -1),
@@ -78,6 +80,19 @@
                               state.CellStateManager)
         self.assertEqual(['no_such_file_exists.conf'], e.config_files)
 
+    @mock.patch.object(cfg.ConfigOpts, 'find_file')
+    @mock.patch.object(fileutils, 'read_cached_file')
+    def test_filemanager_returned(self, mock_read_cached_file, mock_find_file):
+        mock_find_file.return_value = "/etc/nova/cells.json"
+        mock_read_cached_file.return_value = (False, six.StringIO({}))
+        self.flags(cells_config='cells.json', group='cells')
+        self.assertIsInstance(state.CellStateManager(),
+                              state.CellStateManagerFile)
+
+    def test_dbmanager_returned(self):
+        self.assertIsInstance(state.CellStateManager(),
+                              state.CellStateManagerDB)
+
     def test_capacity_no_reserve(self):
         # utilize entire cell
         cap = self._capacity(0.0)
